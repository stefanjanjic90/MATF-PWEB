<!--
raspored zakazanih obaveza
  tabela sa kolonama datum, vreme, rezervisane ucionice, opis obaveze, ime glavnog dezurnog
  sortirana po datumu rastuce (prikazivati samo buduce obaveze)
  npr. pogledati https://godo.matf.bg.ac.rs/preview/
-->

<!--  
  TODO: select kontrola za odabir godine i prikaz po toj godini
-->

<div ng-controller="rasporedControler">
  <div class="forme_dezurstava">
  
    <p class="imenaFormi">Распоред заказаних обавеза</p>
    
    <!-- poruka o uspesnosti -->
    <div class="alert alert-dismissable alert-success" ng-show="success()">
      <button type="button" class="close" data-dismiss="alert" ng-click="successSet(false)">×</button>
      <strong>Успешна промена!</strong> {{msg}}
    </div>
  
    <!-- poruka o gresci -->
    <div class="alert alert-dismissable alert-danger" ng-show="error()">
      <button type="button" class="close" data-dismiss="alert" ng-click="errorSet(false)">×</button>
      <strong>Грешка!</strong> Дошло је до грешке. Молимо вас покушајте поново са променом.
    </div>
    
    <!-- select kontrola za odabir godine za raspored -->
    <div class="row">
      <div class="form-element">
	  <label class="col-lg-2 control-label">Школска година</label>
	  <div class="col-lg-4">
	    <select class="form-control" name="izabranaGodina" ng-model="izabranaGodina">
	      <option ng-repeat="g in godine"> {{ g }} </option> -->
	      <!-- TODO: godine za koje postoji unos u ng-repeat -->
	      <!-- podrazumevana godina je trenutna! -->
	    </select>
	  </div>
	  <span class="col-lg-6"> </span>
	</div>
    </div>
    
    <br>
	
    <!-- TODO: class = active -->
    <!-- sortiranje po danima u nedelji; aktivan je tab za trenutni dan -->
    <div>
      <ul class="nav nav-tabs">
	<li ng-repeat="dan in dani" class="{active: $index===trenutniDan()}"> <a href="" data-toggle="tab" aria-expanded="true" ng-click="odabraniDan($index)"> {{ dan }} </a></li> 
      </ul>
    </div>
    <div class="tab-content">
    <div class="tab-pane fade active in" id="home">
    <div class="table-responsive"> 
      <table class="table table-striped table-hover">
        <thead ng-init="sort='datum'; reverse=false">
	  <tr>
            <th ng-click="sort='datum'; reverse=!reverse" title="Кликните за сортирање по датуму.">Датум</th>
            <th ng-click="sort='vreme'; reverse=!reverse" title="Кликните за сортирање по времену.">Време</th>
            <th ng-click="sort='ucionice'; reverse=!reverse" title="Кликните за сортирање по резервисаним учионицама.">Резервисане учионице</th>
            <th ng-click="sort='opis'; reverse=!reverse" title="Кликните за сортирање по обавезама.">Опис обавезе</th>
            <th ng-click="sort='glavni_dezurni'; reverse=!reverse" title="Кликните за сортирање по главном дежурном.">Главни дежурни</th>
            <th ng-show="loged() && koord() && aktivnaGodina()">Опције</th> <!-- loged(), koord() -> index.js indexControler;  -->
	  </tr>
	</thead>
	<tbody>
	  <tr ng-repeat="aktivnost in raspored | danNedelja:this | orderBy:sort:reverse">
	    <td>{{ aktivnost.datum }}</td>
            <td>{{ aktivnost.vreme }}</td>
            <td>{{ aktivnost.ucionice }}</td>
            <td>{{ aktivnost.opis }}</td>
            <td>{{ aktivnost.glavni_dezurni }}</td>
            <td ng-show="loged() && koord() && aktivnaGodina()"><button type="submit" class="btn btn-primary btn-sm" name="submit" ng-click="otkaziObavezu(aktivnost.id)"> Откажи обавезу </button></td> <!-- ng-show="loged() && koord()" -->
	  </tr>
	</tbody>
      </table>
    </div>
    
    </div>
    </div>
    
  </div> <!-- forme_dezurstava -->
</div>