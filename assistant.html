<!DOCTYPE html>
<html lang="sr" ng-app="accountModule">
	<head>
		<title> MАТФ Дежурства </title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8;" />
		<script type="text/javascript" src="js/jquery-1.11.2.min.js"> </script>
		<script type="text/javascript" src="js/angular.min.js"></script>
		<script type="text/javascript" src="js/angular.js"></script>
		<script type='text/javascript' src='js/angular-route.min.js'> </script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		
		<script type="text/javascript" src="js/bootstrap-datetimepicker.min.js"></script>
		<script type="text/javascript" src="js/bootstrap-datetimepicker.pt-SR.js"></script>

		
		<script type="text/javascript" src="js/assistant.js"></script>
		
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="css/me.css">
		<link rel="stylesheet" type="text/css" href="css/bootstrap-datetimepicker.min.css">

		
		<script type="text/javascript">
		$('#datepicker').datetimepicker({
		  format: 'dd/MM/yyyy',
		  language: 'pt-SR',
		  pickTime: false
		});
	      </script>
	
	</head>
	
	<body>
	<div id="content">
		<div id="tab-container">
			<section ng-init="tab = 1">
				<ul class="nav nav-pills nav-stacked">
					<li ng-class="{ active:tab === 1}" > <a href ng-click="tab = 1">Предстојећа дежурства</a></li>
					<li ng-class="{ active:tab === 2}" > <a href ng-click="tab = 2">Најављивање обавеза</a></li>
					<li ng-class="{ active:tab === 3}" > <a href ng-click="tab = 3">Претходна дежурства</a></li>
					<li ng-class="{ active:tab === 4}" > <a href ng-click="tab = 4">Подешавање налога</a></li>
				</ul>
			</section>
		</div>
		
		<div id="main-container">
				<div id="top" >
					<button class="btn btn-primary" type="button" ng-click="tab = 5">
					Обавештења <span class="badge"></span>
					</button>
					
					<div id="log_out">
						<a href="" id="imeIprezime" >Име и презиме</a>
						<button class="btn btn-primary" type="button" > Одјава </button>
					</div>
				</div>

				<div ng-show="tab === 1">
				<section ng-init="tabSec = 1">
				<ul class="nav nav-tabs">
					<li ng-class="{ active:tabSec === 1}" > <a href ng-click="tabSec = 1">Споредна дежурства</a></li>
					<li ng-class="{ active:tabSec === 2}" > <a href ng-click="tabSec = 2">Главна дежурства</a></li>
				</ul>
				</section>
					<div class="forme_dezurstava" ng-controller="SecDutyController" ng-show="tabSec === 1">
						<p class="imenaFormi"> </p>	
						<div class="kartica" id="sporedna_kartica{{$index}}" ng-repeat="dezurstvo in duty">
							<div class = "header" >															
								<a title="Покушај замену" href="" ng-click="toggle($index)"><span id="grafZamena" class="glyphicon glyphicon-refresh"></span></a>
								<span> <b> {{ dezurstvo.course }} </b> </span> <br/>
								<span> {{dezurstvo.assistant}} </span> 
								<br/>
								<div id="zamena_asistenti{{$index}}" class="tabela_zamena">
									<ul>
										<li ng-repeat = "zamena in possibleRotate">
										  <input type="checkbox" ng-change="sync(bool, zamena, 'r')" ng-model="bool" ng-checked="isChecked(zamena, 'r')"> {{zamena}} 
										</li>							
									</ul> 
									<input type="button" class="btn btn-primary btnReplace" value="Понуди дежурство" ng-disabled="!checkedReplace.length" ng-click="sendRequest($index)">
								</div> 
							</div>
							<div class = "bodyCard">
								<span> Датум: {{dezurstvo.date }}, {{dezurstvo.time}} </span> <br/>
								<span> Учионица: {{dezurstvo.classroom}} </span> <br/>
								<span> Напомена:</span> <br/> <textarea class="napomena" rows="1" disabled>{{dezurstvo.remark}}</textarea> 
							</div> 
						</div>   <!-- div kartica -->
					</div>	<!-- div sporedna forma dezurstva -->
					
					<div class="forme_dezurstava" ng-controller="PrimDutyController" ng-show="tabSec === 2">
						<p class="imenaFormi"> </p>	
						<div class="kartica" ng-repeat="dezurstvo in duty" >
						<section  ng-init="tab$index = 1"> 
						  <ul class="nav nav-tabs">
						    <li ng-class="{active: tab$index===1}"><a href ng-click="tab$index=1">Основно</a></li>
						    <li ng-class="{active: tab$index===2}"><a href ng-click="tab$index=2">Групе</a></li>
						    <li ng-class="{active: tab$index===3}"><a href ng-click="tab$index=3">Коментари</a></li>
						  </ul>
						<section>

						<!-- tab osnovno -->
						<div class="tab-pane active" ng-show="tab$index===1">  
							<div class = "header">
								<button title="Откажи обавезу" type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								<span> <b> {{dezurstvo.course}} </b></span>
							</div>
							<div class = "bodyCard">
								<span> Датум: {{ dezurstvo.date }}, {{ dezurstvo.timeSum }}h </span> <br/>
							</div>
						</div>						   
					
						<!-- tab grupe -->
						<div class="tab-pane" ng-show="tab$index===2" ng-repeat="grupa in dezurstvo.groups"> 
							<div class="{{bgColors[$index%3]}} malaGrupa" >
						  	<label>{{grupa.name}}</label> ({{grupa.start}}-{{grupa.end}}h)
						   	<div> Учионице: <span ng-repeat="room in grupa.classrooms">{{room}} </span></div>
						   	<div> Асистенти: 
						   		<ul>
						   			<li ng-repeat="a in grupa.assistans">{{a}}</li>
						   		</ul>
						   	</div>
							</div>
						</div>
						   
						<!-- tab komentari -->
							<div class="tab-pane" ng-show="tab$index===3">
								<div class="divKomentar">
									<textarea rows="4" cols="31" > </textarea>
									<input type="submit" class="btn btn-primary" value="Постави коментар" ng-click="saveComment($index)" id="postaviKomentar{{$index}}">
								</div>
						 	</div>

  
						</div>  <!-- div kartica -->
					</div> <!-- div glavna dezurstva -->
				</div> <!-- kraj tab-a dezurstvo -->

				<!-- tab za najavljivanje obaveze: -->
				<div ng-show="tab === 2">
					<div class="forme_dezurstava" ng-controller="NewDutyController">
						<p class="imenaFormi"> Заказивање обавезa</p>
				
						<form name="fZakazivanje" class="form-horizontal">
	      		<fieldset>
			      	
			      <div class="form-group">
							<label class="col-lg-2 control-label">Oбавезa</label>
							<div class="col-lg-8">
								<input type="text" class="form-control" name="opisObaveze" ng-model="opisObaveze" placeholder="Опис обавезе" ng-required="true">
							</div>
						</div>
			      	
			      <div class="form-group" >
							<label  class="col-lg-2 control-label">Број група</label>
							<div class="col-lg-8">
							<input type="number" min="0" class="form-control" name="brGrupa" ng-model="brGrupa"  ng-required="true" >
							</div>
						</div>
	
				    <div ng-repeat="grupa in returnArray(brGrupa)" class="{{bgColors[$index%3]}} grupa" id="grupa{{$index}}"><!-- div za pojedinacnu grupu -->
							<form name="fGrupa">
							<div class="form-group"> <!-- naziv grupe -->
							<label class="col-lg-3 control-label">Група</label>
								<div class="col-lg-8">
									<input type="text" class="form-control" name="imeGrupe" ng-model="grupa.ime" placeholder="Група {{$index+1}}" ng-required="true" ng-pattern="[a-zA-Z0-9]*">
								</div>
							</div> 
			      	
			      	<div class="form-group"> <!-- datum  -->
							<label class="col-lg-3 control-label">Предлог датума</label>
								<div class="col-lg-8">
									<div class="radio" ng-required="true">
										<label>
											<input type="radio" name="datumRadio" ng-model="datumRadio" value=false> У колоквијумској недеље
										</label>
										<label>
											<input type="radio" name="datumRadio" ng-model="datumRadio" value=true> Тачан датум
										</label>
									</div>
								</div>
							</div>	
			      	
			      	<div ng-show="datumRadio"><!-- div se prikazuje ako je izabran tacan datum -->
			      		
							<div class="form-group"> <!-- datepicker -->
								<label class="col-lg-3 control-label">Датум</label>
								<div class="col-lg-8">								
									<div class='input-group date' >
										<input type='text' class="form-control" data-date-format="YYYY/MM/DD" placeholder="Датум" ng-model="grupa.datum" ng-pattern="\d\d\.\d\d\.\d\d\d\d">
										<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
									</div>
								</div>
							</div>
			      		
			      	<div class="form-group"> <!-- timepicker obaveze-->						
							<label class="col-lg-3 control-label">Термин обавезе</label>	
								<div class='col-lg-4'>
				          <div class='input-group date' >
				            <input type='text' class="form-control" ng-model="grupa.startObaveze" placeholder="Од" ng-pattern="\d\d:\d\d">
				           <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
				          </div>
				    		</div>
				    		<div class='col-lg-4'>
				          <div class='input-group date' >
				            <input type='text' class="form-control" ng-model="grupa.krajObaveze" placeholder="До" ng-pattern="\d\d:\d\d">
				           	<span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
				          </div>
				    		</div> 
			      	</div>
			      		
			      		
			      	<div class="form-group"> <!-- timepicker rezervacije-->						
							<label class="col-lg-3 control-label">Термин резервације</label>	
								<div class='col-lg-4'>
				          <div class='input-group date' >
				            <input type='text' class="form-control" ng-model="grupa.startRez" placeholder="Од" ng-pattern="\d\d:\d\d">
				           <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
				          </div>
				    		</div>
				    		<div class='col-lg-4'>
				          <div class='input-group date' >
				            <input type='text' class="form-control" ng-model="grupa.krajRez" placeholder="До" ng-pattern="\d\d:\d\d">
				           	<span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
				          </div>
				    		</div> 
			      	</div>	
			      		
			      	</div> <!-- kraj diva koji se prikazuje kada je izabran tacan datum -->

        			<div class="form-group"> <!-- ucionice -->
								<label class="col-lg-3 control-label">Потребне учионице</label>
								<div class="col-lg-8">
									<div class="radio">
									<label ng-repeat="ucionica in classrooms">
										<input type="checkbox" ng-change="sync(bool, ucionica, 'c')" ng-model="bool" ng-checked="isChecked(ucionica, 'c')"> {{ucionica}}
									</label>
									</div> 
								</div>
							</div>
			      
			      	<div class="form-group"> <!-- rad na racunaru  -->
							<label class="col-lg-3 control-label">Рад на рачунару</label>
								<div class="col-lg-8">
									<div class="radio">
										<label>
											<input type="radio" name="onComputer" ng-model="onComputer" value=false> да
										</label>
										<label>
											<input type="radio" name="onComputer" ng-model="onComputer" value=true> не
										</label>
									</div>
								</div>
							</div>	
			      	
			      	<div class="form-group"> <!-- broj  studenata -->
							<label class="col-lg-3 control-label">Број студената</label>
								<div class="col-lg-8">
		    					<input type="text" class="form-control" name="brStudenata" ng-model="grupa.brStudenata" placeholder="Очекивани број студената" ng-required="true" ng-pattern="/^[0-9]+$/">
		  					</div>
							</div>
							
							<div class="form-group"> <!-- broj asistenata -->
							<label  class="col-lg-3 control-label">Број асистената</label>
								<div class="col-lg-8">
		    					<input type="text" class="form-control" name="brAsistenata" ng-model="grupa.brAsistenata" placeholder="Број потребних асистената" ng-required="true" ng-pattern="/^[0-9]+$/">
		  					</div>
							</div>
			      
			      	<div class="form-group"> <!-- napomena za koordinatora -->
							<label class="col-lg-3 control-label">Напомена</label>
								<div class="col-lg-8">
									<input type="text" class="form-control" name="napomenaK" ng-model="grupa.napomenaK" placeholder="Напомена за координатора" ng-pattern="[a-zA-Z0-9]*">
								</div>
							</div> 

			      	<div class="form-group"> <!-- napomena za asistenta -->
							<label class="col-lg-3 control-label">Напомена</label>
								<div class="col-lg-8">
									<input type="text" class="form-control" name="napomenaA" ng-model="grupa.napomenaA" placeholder="Напомена за асистенте" ng-pattern="[a-zA-Z0-9]*">
								</div>
							</div>
							 
							<div class="form-group">
		  					<div class="col-lg-10 col-lg-offset-2">
		    					<input type="submit" class="btnSave btn btn-default" value="Сачувај" ng-click="saveGroup($index)">
		  					</div>
							</div> 
			      </form>
			      </div> <!-- kraj diva za pojedinacnu grupu --> 
						
			      <br/>
						<div class="form-group">
		  				<div class="col-lg-10 col-lg-offset-2">
		    				<input type="reset" class="btn btn-default" value="Поништи" />
		    				<input type="submit" class="btn btn-primary" value="Пошаљи" ng-disabled='!fZakazivanje.$valid'/>
		  				</div>
						</div>
			     
			      </fieldset>
				    </form>
						
					</div> <!-- div forma dezurstava -->
				</div> <!-- div najavljivanje obaveza -->
				

				
				<div ng-show="tab === 3">
					<div class="forme_dezurstava" ng-controller="CompletedDutyController">
						<p class="imenaFormi"> Претходна дежурства </p>
							
	      			<div class="kartica" ng-repeat="obaveza in compDuty">
							<div class = "header">
								<span> <b> {{obaveza.course}} </b></span> 
								<br/>
							</div>
							<div class = "bodyCard">
								<span> Датум: {{obaveza.date}}, {{obaveza.duration}} </span> <br/>
							</div> 
						</div>
	      			
	  			</div>
				</div> <!-- div realizovanih obaveza -->
				
				<!-- podesavanje naloga -->
				<div id="podesavanjeNaloga" ng-show="tab === 4">
					<div class="forme_dezurstava">
						<p class="imenaFormi"> Подешавање налога </p>
						<form class="form-horizontal">
	      		<fieldset>
	      			
	      			<div class="form-group col-lg-10">
								<div class="radio"> 
									<label>
										<input ng-click="view = 1" type="radio" name="optionsRadios" > Промена шифре
									</label>
								</div>		
								<form class="form-horizontal" ng-show="view === 1">
								<fieldset>
									<div class="col-lg-10">
										<br/>
										<label class="col-lg-2 control-label">Стара шифра</label>
										<div class="col-lg-10">
				  						<input type="password" class="form-control" placeholder="Стара шифра">
										</div>
									</div>
									<div class="col-lg-10">
										<br/>
										<label class="col-lg-2 control-label">Нова шифра</label>
										<div class="col-lg-10">
				  						<input type="password" class="form-control" placeholder="Нова шифра">
										</div>
									</div>
									<div class="col-lg-10">
										<br/>
										<label class="col-lg-2 control-label">Поновите шифру</label>
										<div class="col-lg-10">
				  						<input type="password" class="form-control" placeholder="Поновљена шифра">
										</div>
									</div>									
									
									<div class="form-group">
										<div class="col-lg-10 col-lg-offset-2">
											<button type="reset" class="btn btn-default" >Поништи</button>
											<button type="submit" class="btn btn-primary">Потврди</button>
										</div>
									</div>
								</fieldset>
								</form>

								
								<div class="radio">
									<label>
										<input ng-click="view = 2" type="radio" name="optionsRadios"> Промена е-маил адресе
									</label>
								</div>
								<form class="form-horizontal" ng-show="view === 2" >
								<fieldset>
									<div class="col-lg-10">
										<br/>
										<label class="col-lg-2 control-label">Нова е-маил адреса</label>
										<div class="col-lg-10">
											<input type="email" class="form-control" placeholder="Нова е-маил адреса">
										</div>
									</div>
									
									<div class="form-group">
										<div class="col-lg-10 col-lg-offset-2">
											<button type="reset" class="btn btn-default" >Поништи</button>
											<button type="submit" class="btn btn-primary" >Потврди</button>
										</div>
									</div>
								</fieldset>
								</form>

						</div>
	      		</fieldset>
	      		</form>
					</div> <!-- div forma dezurstva -->
				</div> <!-- div podesavanje naloga -->
				
				
				<!-- div sa porukama -->
				<div ng-show="tab === 5">
					<div class="forme_dezurstava" >
						<p class="imenaFormi"> Табеле обавештења </p>
							<table class="table table-striped table-bordered table-hover" ng-controller="UserOfferController">
								<caption>  </caption>
									<tr class="bold">
										<td width="70%"> Порукe </td> <td width="30%"> Опције</td>
									</tr>
									<tr ng-repeat="ponuda in offer">
										<td><a>{{ponuda.assistant}}</a> је понудио/ла дежурство за {{ponuda.date}}., {{ponuda.time}}<br/>({{ponuda.course}})</td>	
										<td><button type="submit" class="btn btn-primary btn-sm">Прихвати</button>
												<button type="submit" class="btn btn-warning btn-sm" title="Биће послатa порука асистенту">Извињење</button></td>
									</tr>
							</table>
							<br /> <br /> <br /> <br />
							<table class="table table-striped table-bordered table-hover" ng-controller="CommentsController">
									<tr class="bold">
										<td width="7%"></td> <td width="93%"> Коментари </td>
									</tr>
									<tr ng-repeat="komentar in comments">
										<td> <input type="checkbox" title="Обележи као прочитано" ></td>
										<td>{{komentar.comment}}<footer class="text-info">Kоментар оставио/ла: {{komentar.assistant}}, {{komentar.course}}, датум: {{komentar.date}}</footer></td>	
									</tr>
							</table>
	  			</div>
				</div> <!-- div sa porukama -->
				
			</div> <!-- div main-conteiner -->	
		</div> <!-- div content -->	
	</body>
</html>
